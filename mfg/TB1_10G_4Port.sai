############################################################################################################
#
# Requirements:
# 	- SMBAPI setup in your env on beavis
#		- setenv LD_LIBRARY_PATH /usr/local/smartbits/SmartBitsAPI/bin
#		- set env PATH ".:/usr/local/smartbits/SmartBitsAPI/bin"
#	- Make the following directories:
#		- mkdir temp
#                                                                                                          
############################################################################################################
sai smartflow

testdefaults
   erroraction IGNORE                   # Ignores error dialogs
   testinteractive no			#
   sizewcrc yes				#
   readbackdelay 2			#
   socketlinkport 16385			#
   learningcount 1			#
   statusmessagefilter normal		#
   RatePerFlowUnit percentage  		#
   ResultDataSpeedUnit Mbps    		#
   ResultL2Adjustment 38    		#
   thruputSMMR 24.50:24.50:24.50:0.5	#
   definethruput 0			#
   thruputRSB 0:0:1			#
   thruputscale 0.500			#
   thruputgranularity group		#
 
ports
############################################################################################################
#      H:S:P  Strt% Step    Spd Dplx AutoNg Burst Fill  Dut  DIC  IPaddress  Gateway   Netmask         Name#
############################################################################################################
# Ports e0
  eth  0:2:0  100.00 10.00  10G  F    A      1   random L2S  yes  10.1.0.1   10.1.0.2  255.0.0.0       s0e0

# Ports e1
  eth  0:3:0  100.00 10.00  10G  F    A      1   random L2S  yes  10.2.0.1   10.2.0.2  255.0.0.0       s0e1

resolve_endpoints
########################################################################################################
#       Endpoint    Port          MACaddress       IPaddress  Gateway       UDP/TCPport VlanTag        #
########################################################################################################
########################################################################################################
# s0.e0 Flows Start - XPC-Test
########################################################################################################
   node 1001    s0e0  0.0.19.0.0.01    10.1.1.0   10.1.0.2/8   1024+
   node 1002    s0e0  0.0.19.0.0.01    10.1.1.1   10.1.0.2/8   1024+
   node 1003    s0e0  0.0.19.0.0.01    10.1.1.2   10.1.0.2/8   1024+
   node 1004    s0e0  0.0.19.0.0.01    10.1.1.3   10.1.0.2/8   1024+
   node 1005    s0e0  0.0.19.0.0.01    10.1.1.4   10.1.0.2/8   1024+
   node 1006    s0e0  0.0.19.0.0.01    10.1.1.5   10.1.0.2/8   1024+
   node 1007    s0e0  0.0.19.0.0.01    10.1.1.6   10.1.0.2/8   1024+
   node 1008    s0e0  0.0.19.0.0.01    10.1.1.7   10.1.0.2/8   1024+
   node 1009    s0e0  0.0.19.0.0.01    10.1.1.8   10.1.0.2/8   1024+
   node 1010    s0e0  0.0.19.0.0.01    10.1.1.9   10.1.0.2/8   1024+
   node 1011    s0e0  0.0.19.0.0.01    10.1.1.10  10.1.0.2/8   1024+
   node 1012    s0e0  0.0.19.0.0.01    10.1.1.11  10.1.0.2/8   1024+
   node 1013    s0e0  0.0.19.0.0.01    10.1.1.12  10.1.0.2/8   1024+
   node 1014    s0e0  0.0.19.0.0.01    10.1.1.13  10.1.0.2/8   1024+
   node 1015    s0e0  0.0.19.0.0.01    10.1.1.14  10.1.0.2/8   1024+
   node 1016    s0e0  0.0.19.0.0.01    10.1.1.15  10.1.0.2/8   1024+
   node 1017    s0e0  0.0.19.0.0.01    10.1.1.16  10.1.0.2/8   1024+
   node 1018    s0e0  0.0.19.0.0.01    10.1.1.17  10.1.0.2/8   1024+
   node 1019    s0e0  0.0.19.0.0.01    10.1.1.18  10.1.0.2/8   1024+
   node 1020    s0e0  0.0.19.0.0.01    10.1.1.19  10.1.0.2/8   1024+
   node 1021    s0e0  0.0.19.0.0.01    10.1.1.20  10.1.0.2/8   1024+
   node 1022    s0e0  0.0.19.0.0.01    10.1.1.21  10.1.0.2/8   1024+
   node 1023    s0e0  0.0.19.0.0.01    10.1.1.22  10.1.0.2/8   1024+
   node 1024    s0e0  0.0.19.0.0.01    10.1.1.23  10.1.0.2/8   1024+

########################################################################################################
# s0.e1 Flows Start - XPC-Test									       #
########################################################################################################
   node 2001    s0e1  0.0.19.0.1.01    10.2.1.0   10.2.0.2/8   1024+
   node 2002    s0e1  0.0.19.0.1.01    10.2.1.1   10.2.0.2/8   1024+
   node 2003    s0e1  0.0.19.0.1.01    10.2.1.2   10.2.0.2/8   1024+
   node 2004    s0e1  0.0.19.0.1.01    10.2.1.3   10.2.0.2/8   1024+
   node 2005    s0e1  0.0.19.0.1.01    10.2.1.4   10.2.0.2/8   1024+
   node 2006    s0e1  0.0.19.0.1.01    10.2.1.5   10.2.0.2/8   1024+
   node 2007    s0e1  0.0.19.0.1.01    10.2.1.6   10.2.0.2/8   1024+
   node 2008    s0e1  0.0.19.0.1.01    10.2.1.7   10.2.0.2/8   1024+
   node 2009    s0e1  0.0.19.0.1.01    10.2.1.8   10.2.0.2/8   1024+
   node 2010    s0e1  0.0.19.0.1.01    10.2.1.9   10.2.0.2/8   1024+
   node 2011    s0e1  0.0.19.0.1.01    10.2.1.10  10.2.0.2/8   1024+
   node 2012    s0e1  0.0.19.0.1.01    10.2.1.11  10.2.0.2/8   1024+
   node 2013    s0e1  0.0.19.0.1.01    10.2.1.12  10.2.0.2/8   1024+
   node 2014    s0e1  0.0.19.0.1.01    10.2.1.13  10.2.0.2/8   1024+
   node 2015    s0e1  0.0.19.0.1.01    10.2.1.14  10.2.0.2/8   1024+
   node 2016    s0e1  0.0.19.0.1.01    10.2.1.15  10.2.0.2/8   1024+
   node 2017    s0e1  0.0.19.0.1.01    10.2.1.16  10.2.0.2/8   1024+
   node 2018    s0e1  0.0.19.0.0.01    10.2.1.17  10.2.0.2/8   1024+
   node 2019    s0e1  0.0.19.0.0.01    10.2.1.18  10.2.0.2/8   1024+
   node 2020    s0e1  0.0.19.0.0.01    10.2.1.19  10.2.0.2/8   1024+
   node 2021    s0e1  0.0.19.0.0.01    10.2.1.20  10.2.0.2/8   1024+
   node 2022    s0e1  0.0.19.0.0.01    10.2.1.21  10.2.0.2/8   1024+
   node 2023    s0e1  0.0.19.0.0.01    10.2.1.22  10.2.0.2/8   1024+
   node 2024    s0e1  0.0.19.0.0.01    10.2.1.23  10.2.0.2/8   1024+
   
defineflows
########################################################################################################
#      Src->Dst           Name             Frmsz Tos TTL Varfld Vid VlanP Len Ack Aeq Wnd Flg          #
########################################################################################################
# s0.e0(10.1.1.1+) --> s0.e1(10.2.1.1)                                                                 #
######################################################################################################## 
   UDP 1001->2002    s0e0_001             64    00  64  none   0   0
   UDP 1002->2002    s0e0_002             64    00  64  none   0   0
   UDP 1003->2002    s0e0_003             64    00  64  none   0   0
   UDP 1004->2002    s0e0_004             64    00  64  none   0   0
   UDP 1005->2002    s0e0_005             64    00  64  none   0   0
   UDP 1006->2002    s0e0_006             64    00  64  none   0   0
   UDP 1007->2002    s0e0_007             64    00  64  none   0   0
   UDP 1008->2002    s0e0_008             64    00  64  none   0   0
   UDP 1009->2002    s0e0_009             64    00  64  none   0   0
   UDP 1010->2002    s0e0_010             64    00  64  none   0   0
   UDP 1011->2002    s0e0_011             64    00  64  none   0   0
   UDP 1012->2002    s0e0_012             64    00  64  none   0   0
   UDP 1013->2002    s0e0_013             64    00  64  none   0   0
   UDP 1014->2002    s0e0_014             64    00  64  none   0   0
   UDP 1015->2002    s0e0_015             64    00  64  none   0   0
   UDP 1016->2002    s0e0_016             64    00  64  none   0   0
   UDP 1017->2002    s0e0_017             64    00  64  none   0   0
   UDP 1018->2002    s0e0_018             64    00  64  none   0   0
   UDP 1019->2002    s0e0_019             64    00  64  none   0   0
   UDP 1020->2002    s0e0_020             64    00  64  none   0   0
   UDP 1021->2002    s0e0_021             64    00  64  none   0   0
   UDP 1022->2002    s0e0_022             64    00  64  none   0   0
   UDP 1023->2002    s0e0_023             64    00  64  none   0   0
   UDP 1024->2002    s0e0_024             64    00  64  none   0   0
########################################################################################################
# s0.e1(10.2.1.1+) --> s0.e0(10.1.1.1)                                                                 #
######################################################################################################## 
   UDP 2001->1002    s0e1_001             64    00  64  none   0   0
   UDP 2002->1002    s0e1_002             64    00  64  none   0   0
   UDP 2003->1002    s0e1_003             64    00  64  none   0   0
   UDP 2004->1002    s0e1_004             64    00  64  none   0   0
   UDP 2005->1002    s0e1_005             64    00  64  none   0   0
   UDP 2006->1002    s0e1_006             64    00  64  none   0   0
   UDP 2007->1002    s0e1_007             64    00  64  none   0   0
   UDP 2008->1002    s0e1_008             64    00  64  none   0   0
   UDP 2009->1002    s0e1_009             64    00  64  none   0   0
   UDP 2010->1002    s0e1_010             64    00  64  none   0   0
   UDP 2011->1002    s0e1_011             64    00  64  none   0   0
   UDP 2012->1002    s0e1_012             64    00  64  none   0   0
   UDP 2013->1002    s0e1_013             64    00  64  none   0   0
   UDP 2014->1002    s0e1_014             64    00  64  none   0   0
   UDP 2015->1002    s0e1_015             64    00  64  none   0   0
   UDP 2016->1002    s0e1_016             64    00  64  none   0   0
   UDP 2017->1002    s0e1_017             64    00  64  none   0   0
   UDP 2018->1002    s0e1_018             64    00  64  none   0   0
   UDP 2019->1002    s0e1_019             64    00  64  none   0   0
   UDP 2020->1002    s0e1_020             64    00  64  none   0   0
   UDP 2021->1002    s0e1_021             64    00  64  none   0   0
   UDP 2022->1002    s0e1_022             64    00  64  none   0   0
   UDP 2023->1002    s0e1_023             64    00  64  none   0   0
   UDP 2024->1002    s0e1_024             64    00  64  none   0   0

definegroups
########################################################################################################
#        name             flow_name_in_group                                                           #
######################################################################################################## 
group TB1_10G_4Port     	s0e0_001:s0e0_012\
		         	s0e1_001:s0e1_012\
		         		       
		      
#
# Junk test
#
flowtest 1
   testname TB1_10G_4Port_junk
   connect 192.168.7.50
   testtype THRUPUT
   testtime 2
   ReportAFGRTS 1:1:1:0:0:0
   training NO
   includegroups  TB1_10G_4Port
   reportfilename temp/TB1_10G_4Port_junk.csv
   framesizes 512 
   DIEnabled no 
#
# I/O Test
#
flowtest 2
   testname TB1_10G_4Port_IO
   connect 192.168.7.50
   testtype THRUPUT
   testtime 10
   ReportAFGRTS 1:1:1:0:0:0
   training NO
   includegroups  TB1_10G_4Port
   reportfilename temp/TB1_10G_4Port_IO.csv
   statusmessagefilename temp/TB1_10G_4Port_IO.log
   framesizes 350 440 1518
   DIEnabled no   
#
# Chassis Quick Test
#
flowtest 3
   testname TB1_10G_4Port_Quick
   connect 192.168.7.50
   testtype THRUPUT
   testtime 10
   ReportAFGRTS 1:1:1:0:0:0
   training NO
   includegroups  TB1_10G_4Port
   reportfilename temp/TB1_10G_4Port_Quick.csv
   statusmessagefilename temp/TB1_10G_4Port_Quick.log
   framesizes 350 440 1518
   DIEnabled no   
#
# Chassis Long Test(600 Second Test)
#
flowtest 4
   testname TB1_10G_4Port_600
   connect 192.168.7.50
   testtype THRUPUT
   testtime 600
   ReportAFGRTS 1:1:1:0:0:0
   training NO
   includegroups  TB1_10G_4Port
   reportfilename temp/TB1_10G_4Port_600.csv
   statusmessagefilename temp/TB1_10G_4Port_600.log
   framesizes 350 440 1518
   DIEnabled no   
