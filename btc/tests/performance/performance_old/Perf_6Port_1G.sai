############################################################################################################
#
# Requirements:
# 	- SMBAPI setup in your env on beavis
#		- setenv LD_LIBRARY_PATH /usr/local/smartbits/SmartBitsAPI/bin
#		- set env PATH ".:/usr/local/smartbits/SmartBitsAPI/bin"
#	- Make the following directories:
#		- mkdir temp
#
# CABLING INSTRUCTIONS
# --------------------
# Slot0: 6-Port 1000 Mbps Fiber Card	connected to	LAN-3201A
#
# SMB Port #            	Bivio Port
# ~~~~~~~~~~~~          	~~~~~~~~~~ 
# Slot0
# ~~~~~
# 00:00:00(1A-01)	-	s0.e0
# 00:01:00(1B-01)	-	s0.e1
# 00:02:00(2A-01)	-	s0.e2
# 00:03:00(2B-01)	-	s0.e3
# 00:04:00(3A-01)	-	s0.e4
# 00:05:00(3B-01)	-	s0.e5
#
# END
# ---
############################################################################################################
sai smartflow

testdefaults
   erroraction IGNORE				# Ignores error dialogs
   testinteractive no				#
   showloading no				# Stops showing the loading of the streams in logfile
   sizewcrc yes					# Pkt Size with CRC Yes|No
   readbackdelay 2				# Delay before counters are read from smartbits
   socketlinkport 16385				# Port to connect to SMB Chassis
   learningcount 1				#
   statusmessagefilter normal			# 
   RatePerFlowUnit percentage			#
   ResultDataSpeedUnit Mbps			#
   ResultL2Adjustment 38			#
   thruputSMMR 100.000:1.000:100.000:1.0	# Start:Min:Max:Resolution
   definethruput 0				#
   thruputRSB 0:0:1				# 0:0:1 Standard Binary Search,
   thruputscale 0.500				#
   thruputgranularity group			# system, group, flow, or all
 
ports
############################################################################################################
#      H:S:P  Strt% Step    Spd Dplx AutoNg Burst Fill Dut IPaddress   Gateway    Netmask     Mode   Name  #
############################################################################################################
#
# Ports s0.e0 --> e5
# 
  eth  00:00:00  10.00 10.00  1000  F    A      1  random  L2S   10.1.0.1   10.1.0.2  255.0.0.0	fiber	e0
  eth  00:01:00  10.00 10.00  1000  F    A      1  random  L2S   10.2.0.1   10.2.0.2  255.0.0.0	fiber	e1
  eth  00:02:00  10.00 10.00  1000  F    A      1  random  L2S   10.3.0.1   10.3.0.2  255.0.0.0	fiber	e2
  eth  00:03:00  10.00 10.00  1000  F    A      1  random  L2S   10.4.0.1   10.4.0.2  255.0.0.0	fiber	e3
  eth  00:04:00  10.00 10.00  1000  F    A      1  random  L2S   10.5.0.1   10.5.0.2  255.0.0.0	fiber	e4
  eth  00:05:00  10.00 10.00  1000  F    A      1  random  L2S   10.6.0.1   10.6.0.2  255.0.0.0	fiber	e5

resolve_endpoints
########################################################################################################
#       Endpoint    Port          MACaddress       IPaddress  Gateway       UDP/TCPport VlanTag        #
########################################################################################################
########################################################################################################
# s0.e0 Flows Start - XPC-Test
########################################################################################################
   node 1000    e0  0.0.19.0.0.00    10.1.1.0   10.1.0.2/8   1024+
   node 1001    e0  0.0.19.0.0.01    10.1.1.1   10.1.0.2/8   1024+
   node 1002    e0  0.0.19.0.0.02    10.1.1.2   10.1.0.2/8   1024+
   node 1003    e0  0.0.19.0.0.03    10.1.1.3   10.1.0.2/8   1024+
   node 1004    e0  0.0.19.0.0.04    10.1.1.4   10.1.0.2/8   1024+
   node 1005    e0  0.0.19.0.0.05    10.1.1.5   10.1.0.2/8   1024+
   node 1006    e0  0.0.19.0.0.06    10.1.1.6   10.1.0.2/8   1024+
   node 1007    e0  0.0.19.0.0.07    10.1.1.7   10.1.0.2/8   1024+
   node 1008    e0  0.0.19.0.0.08    10.1.1.8   10.1.0.2/8   1024+
   node 1009    e0  0.0.19.0.0.09    10.1.1.9   10.1.0.2/8   1024+
   node 1010    e0  0.0.19.0.0.0A    10.1.1.10  10.1.0.2/8   1024+
   node 1011    e0  0.0.19.0.0.0B    10.1.1.11  10.1.0.2/8   1024+

########################################################################################################
# s0.e1 Flows Start - XPC-Test									       #
########################################################################################################
   node 2000    e1  0.0.19.0.1.00    10.2.1.0   10.2.0.2/8   1024+
   node 2001    e1  0.0.19.0.1.01    10.2.1.1   10.2.0.2/8   1024+
   node 2002    e1  0.0.19.0.1.02    10.2.1.2   10.2.0.2/8   1024+
   node 2003    e1  0.0.19.0.1.03    10.2.1.3   10.2.0.2/8   1024+
   node 2004    e1  0.0.19.0.1.04    10.2.1.4   10.2.0.2/8   1024+
   node 2005    e1  0.0.19.0.1.05    10.2.1.5   10.2.0.2/8   1024+
   node 2006    e1  0.0.19.0.1.06    10.2.1.6   10.2.0.2/8   1024+
   node 2007    e1  0.0.19.0.1.07    10.2.1.7   10.2.0.2/8   1024+
   node 2008    e1  0.0.19.0.1.08    10.2.1.8   10.2.0.2/8   1024+
   node 2009    e1  0.0.19.0.1.09    10.2.1.9   10.2.0.2/8   1024+
   node 2010    e1  0.0.19.0.1.0A    10.2.1.10  10.2.0.2/8   1024+
   node 2011    e1  0.0.19.0.1.0B    10.2.1.11  10.2.0.2/8   1024+
 
########################################################################################################
# s0.e2 Flows Start - XPC-Test									       #
########################################################################################################
   node 3000    e2  0.0.19.0.2.00    10.3.1.0   10.3.0.2/8   1024+
   node 3001    e2  0.0.19.0.2.01    10.3.1.1   10.3.0.2/8   1024+
   node 3002    e2  0.0.19.0.2.02    10.3.1.2   10.3.0.2/8   1024+
   node 3003    e2  0.0.19.0.2.03    10.3.1.3   10.3.0.2/8   1024+
   node 3004    e2  0.0.19.0.2.04    10.3.1.4   10.3.0.2/8   1024+
   node 3005    e2  0.0.19.0.2.05    10.3.1.5   10.3.0.2/8   1024+
   node 3006    e2  0.0.19.0.2.06    10.3.1.6   10.3.0.2/8   1024+
   node 3007    e2  0.0.19.0.2.07    10.3.1.7   10.3.0.2/8   1024+
   node 3008    e2  0.0.19.0.2.08    10.3.1.8   10.3.0.2/8   1024+
   node 3009    e2  0.0.19.0.2.09    10.3.1.9   10.3.0.2/8   1024+
   node 3010    e2  0.0.19.0.2.0A    10.3.1.10  10.3.0.2/8   1024+
   node 3011    e2  0.0.19.0.2.0B    10.3.1.11  10.3.0.2/8   1024+
  
########################################################################################################
# s0.e3 Flows Start - XPC-Test									       #
########################################################################################################
   node 4000    e3  0.0.19.0.3.00    10.4.1.0   10.4.0.2/8   1024+
   node 4001    e3  0.0.19.0.3.01    10.4.1.1   10.4.0.2/8   1024+
   node 4002    e3  0.0.19.0.3.02    10.4.1.2   10.4.0.2/8   1024+
   node 4003    e3  0.0.19.0.3.03    10.4.1.3   10.4.0.2/8   1024+
   node 4004    e3  0.0.19.0.3.04    10.4.1.4   10.4.0.2/8   1024+
   node 4005    e3  0.0.19.0.3.05    10.4.1.5   10.4.0.2/8   1024+
   node 4006    e3  0.0.19.0.3.06    10.4.1.6   10.4.0.2/8   1024+
   node 4007    e3  0.0.19.0.3.07    10.4.1.7   10.4.0.2/8   1024+
   node 4008    e3  0.0.19.0.3.08    10.4.1.8   10.4.0.2/8   1024+
   node 4009    e3  0.0.19.0.3.09    10.4.1.9   10.4.0.2/8   1024+
   node 4010    e3  0.0.19.0.3.0A    10.4.1.10  10.4.0.2/8   1024+
   node 4011    e3  0.0.19.0.3.0B    10.4.1.11  10.4.0.2/8   1024+
 
########################################################################################################
# s0.e4 Flows Start - XPC-Test									       #
########################################################################################################
   node 5000    e4  0.0.19.0.4.00    10.5.1.0   10.5.0.2/8   1024+
   node 5001    e4  0.0.19.0.4.01    10.5.1.1   10.5.0.2/8   1024+
   node 5002    e4  0.0.19.0.4.02    10.5.1.2   10.5.0.2/8   1024+
   node 5003    e4  0.0.19.0.4.03    10.5.1.3   10.5.0.2/8   1024+
   node 5004    e4  0.0.19.0.4.04    10.5.1.4   10.5.0.2/8   1024+
   node 5005    e4  0.0.19.0.4.05    10.5.1.5   10.5.0.2/8   1024+
   node 5006    e4  0.0.19.0.4.06    10.5.1.6   10.5.0.2/8   1024+
   node 5007    e4  0.0.19.0.4.07    10.5.1.7   10.5.0.2/8   1024+
   node 5008    e4  0.0.19.0.4.08    10.5.1.8   10.5.0.2/8   1024+
   node 5009    e4  0.0.19.0.4.09    10.5.1.9   10.5.0.2/8   1024+
   node 5010    e4  0.0.19.0.4.0A    10.5.1.10  10.5.0.2/8   1024+
   node 5011    e4  0.0.19.0.4.0B    10.5.1.11  10.5.0.2/8   1024+
  
########################################################################################################
# s0.e5 Flows Start - XPC-Test									       #
########################################################################################################
   node 6000    e5  0.0.19.0.5.00    10.6.1.0   10.6.0.2/8   1024+
   node 6001    e5  0.0.19.0.5.01    10.6.1.1   10.6.0.2/8   1024+
   node 6002    e5  0.0.19.0.5.02    10.6.1.2   10.6.0.2/8   1024+
   node 6003    e5  0.0.19.0.5.03    10.6.1.3   10.6.0.2/8   1024+
   node 6004    e5  0.0.19.0.5.04    10.6.1.4   10.6.0.2/8   1024+
   node 6005    e5  0.0.19.0.5.05    10.6.1.5   10.6.0.2/8   1024+
   node 6006    e5  0.0.19.0.5.06    10.6.1.6   10.6.0.2/8   1024+
   node 6007    e5  0.0.19.0.5.07    10.6.1.7   10.6.0.2/8   1024+
   node 6008    e5  0.0.19.0.5.08    10.6.1.8   10.6.0.2/8   1024+
   node 6009    e5  0.0.19.0.5.09    10.6.1.9   10.6.0.2/8   1024+
   node 6010    e5  0.0.19.0.5.0A    10.6.1.10  10.6.0.2/8   1024+
   node 6011    e5  0.0.19.0.5.0B    10.6.1.11  10.6.0.2/8   1024+
 
defineflows
########################################################################################################
#      Src->Dst           Name             Frmsz Tos TTL Varfld Vid VlanP Len Ack Aeq Wnd Flg          #
########################################################################################################
# s0.e0                                                                                                #
######################################################################################################## 
   UDP 1000->2001    e0_000             64    00  64  none   0   0
   UDP 1001->2001    e0_001             64    00  64  none   0   0
   UDP 1002->2001    e0_002             64    00  64  none   0   0
   UDP 1003->2001    e0_003             64    00  64  none   0   0
   UDP 1004->2001    e0_004             64    00  64  none   0   0
   UDP 1005->2001    e0_005             64    00  64  none   0   0
   UDP 1006->2001    e0_006             64    00  64  none   0   0
   UDP 1007->2001    e0_007             64    00  64  none   0   0
   UDP 1008->2001    e0_008             64    00  64  none   0   0
   UDP 1009->2001    e0_009             64    00  64  none   0   0
   UDP 1010->2001    e0_010             64    00  64  none   0   0
   UDP 1011->2001    e0_011             64    00  64  none   0   0
 
########################################################################################################
# s0.e1                                                                                                #
######################################################################################################## 
   UDP 2000->1001    e1_000             64    00  64  none   0   0
   UDP 2001->1001    e1_001             64    00  64  none   0   0
   UDP 2002->1001    e1_002             64    00  64  none   0   0
   UDP 2003->1001    e1_003             64    00  64  none   0   0
   UDP 2004->1001    e1_004             64    00  64  none   0   0
   UDP 2005->1001    e1_005             64    00  64  none   0   0
   UDP 2006->1001    e1_006             64    00  64  none   0   0
   UDP 2007->1001    e1_007             64    00  64  none   0   0
   UDP 2008->1001    e1_008             64    00  64  none   0   0
   UDP 2009->1001    e1_009             64    00  64  none   0   0
   UDP 2010->1001    e1_010             64    00  64  none   0   0
   UDP 2011->1001    e1_011             64    00  64  none   0   0
    
########################################################################################################
# s0.e2                                                                                                #
######################################################################################################## 
   UDP 3000->4002    e2_000             64    00  64  none   0   0
   UDP 3001->4002    e2_001             64    00  64  none   0   0
   UDP 3002->4002    e2_002             64    00  64  none   0   0
   UDP 3003->4002    e2_003             64    00  64  none   0   0
   UDP 3004->4002    e2_004             64    00  64  none   0   0
   UDP 3005->4002    e2_005             64    00  64  none   0   0
   UDP 3006->4002    e2_006             64    00  64  none   0   0
   UDP 3007->4002    e2_007             64    00  64  none   0   0
   UDP 3008->4002    e2_008             64    00  64  none   0   0
   UDP 3009->4002    e2_009             64    00  64  none   0   0
   UDP 3010->4002    e2_010             64    00  64  none   0   0
   UDP 3011->4002    e2_011             64    00  64  none   0   0
   
########################################################################################################
# s0.e3                                                                                                #
######################################################################################################## 
   UDP 4000->3001    e3_000             64    00  64  none   0   0
   UDP 4001->3001    e3_001             64    00  64  none   0   0
   UDP 4002->3001    e3_002             64    00  64  none   0   0
   UDP 4003->3001    e3_003             64    00  64  none   0   0
   UDP 4004->3001    e3_004             64    00  64  none   0   0
   UDP 4005->3001    e3_005             64    00  64  none   0   0
   UDP 4006->3001    e3_006             64    00  64  none   0   0
   UDP 4007->3001    e3_007             64    00  64  none   0   0
   UDP 4008->3001    e3_008             64    00  64  none   0   0
   UDP 4009->3001    e3_009             64    00  64  none   0   0
   UDP 4010->3001    e3_010             64    00  64  none   0   0
   UDP 4011->3001    e3_011             64    00  64  none   0   0

########################################################################################################
# s0.e4                                                                                                #
######################################################################################################## 
   UDP 5000->6001    e4_000             64    00  64  none   0   0
   UDP 5001->6001    e4_001             64    00  64  none   0   0
   UDP 5002->6001    e4_002             64    00  64  none   0   0
   UDP 5003->6001    e4_003             64    00  64  none   0   0
   UDP 5004->6001    e4_004             64    00  64  none   0   0
   UDP 5005->6001    e4_005             64    00  64  none   0   0
   UDP 5006->6001    e4_006             64    00  64  none   0   0
   UDP 5007->6001    e4_007             64    00  64  none   0   0
   UDP 5008->6001    e4_008             64    00  64  none   0   0
   UDP 5009->6001    e4_009             64    00  64  none   0   0
   UDP 5010->6001    e4_010             64    00  64  none   0   0
   UDP 5011->6001    e4_011             64    00  64  none   0   0
   
########################################################################################################
# s0.e5                                                                                                #
######################################################################################################## 
   UDP 6000->5001    e5_000             64    00  64  none   0   0
   UDP 6001->5001    e5_001             64    00  64  none   0   0
   UDP 6002->5001    e5_002             64    00  64  none   0   0
   UDP 6003->5001    e5_003             64    00  64  none   0   0
   UDP 6004->5001    e5_004             64    00  64  none   0   0
   UDP 6005->5001    e5_005             64    00  64  none   0   0
   UDP 6006->5001    e5_006             64    00  64  none   0   0
   UDP 6007->5001    e5_007             64    00  64  none   0   0
   UDP 6008->5001    e5_008             64    00  64  none   0   0
   UDP 6009->5001    e5_009             64    00  64  none   0   0
   UDP 6010->5001    e5_010             64    00  64  none   0   0
   UDP 6011->5001    e5_011             64    00  64  none   0   0
   
definegroups
########################################################################################################
#        name             flow_name_in_group                                                           #
######################################################################################################## 
group Perf_6Port_1G	e0_000:e0_011\
				e1_000:e1_011\
				e2_000:e2_011\
				e3_000:e3_011\
				e4_000:e4_011\
				e5_000:e5_011\

#
# Short Test (10 Second Test)
#
flowtest 1
   testname Perf_6Port_1G_Short
   connect 192.168.100.218
   testtype THRUPUT
   testtime 10
   ReportAFGRTS 1:1:1:0:0:0
   training NO
   includegroups  Perf_6Port_1G
   reportfilename temp/Perf_6Port_1G_short.csv
   statusmessagefilename temp/Perf_6Port_1G_short.log
   framesizes 64 128 200 256 350 384 440 448 500 512 1024 1280 1500 1518
   DIEnabled no   
#
# Standard Test (60 Second Test)
#
flowtest 2
   testname Perf_6Port_1G_Standard
   connect 192.168.100.218
   testtype THRUPUT
   testtime 60
   ReportAFGRTS 1:1:1:0:0:0
   training NO
   includegroups  Perf_6Port_1G
   reportfilename temp/Perf_6Port_1G_Standard.csv
   statusmessagefilename temp/Perf_6Port_1G_Standard.log
   framesizes 64 128 200 256 350 384 440 448 500 512 1024 1280 1500 1518
   DIEnabled no 
#
# Long Test(600 Second Test)
#
flowtest 3
   testname Perf_6Port_1G_Long
   connect 192.168.100.218
   testtype THRUPUT
   testtime 600
   ReportAFGRTS 1:1:1:0:0:0
   training NO
   includegroups  Perf_6Port_1G
   reportfilename temp/Perf_6Port_1G_Long.csv
   statusmessagefilename temp/Perf_6Port_1G_Long.log
   framesizes 64 128 200 256 350 384 440 448 500 512 1024 1280 1500 1518
   DIEnabled no 
#
# AllPacket Test(10 Second Test, but *very* long)
#
flowtest 4
   testname Perf_6Port_1G_All
   connect 192.168.100.218
   testtype THRUPUT
   testtime 10
   ReportAFGRTS 1:1:1:0:0:0
   training NO
   includegroups  Perf_6Port_1G
   reportfilename temp/Perf_6Port_1G_All.csv
   statusmessagefilename temp/Perf_6Port_1G_All.log
   framesizes 64:1518:1 
   DIEnabled no    
#
# Jumbo Packet Test(60 Second Test)
#
# Note: settings to allow Jumbo Packets must be configured 
# on the system. See TestLink ID# 3857
#   
#
flowtest 5
   testname Perf_6Port_1G_Jumbo
   connect 192.168.100.218
   testtype THRUPUT
   testtime 60
   ReportAFGRTS 1:1:1:0:0:0
   training NO
   includegroups  Perf_6Port_1G
   reportfilename temp/Perf_6Port_1G_Jumbo.csv
   statusmessagefilename temp/Perf_6Port_1G_Jumbo.log
   DIEnabled no 
   framesizes 1500:9500:500 9600
   AllowJumboFrame yes    
